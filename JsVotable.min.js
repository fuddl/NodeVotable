/*******************************************************************************
 * Copyright 2016 - Jean-Christophe Malapert
 *
 * This file is part of JsVotable.
 *
 * JsVotable is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * JsVotable is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with JVotable.  If not, see <http://www.gnu.org/licenses/>.
 ******************************************************************************/

!function(){function t(t){"use strict";var e,r,n;return e=new ArrayBuffer(2),r=new DataView(e),n=t.join(""),r.setUint16(0,parseInt(n,2)),r.getInt16(0)}function e(t){"use strict";var e,r,n;return e=new ArrayBuffer(4),r=new DataView(e),n=t.join(""),r.setUint32(0,parseInt(n,2)),r.getInt32(0)}function r(t){"use strict";var e,r,n;return e=new ArrayBuffer(4),r=new DataView(e),n=t.join(""),r.setUint32(0,parseInt(n,2)),r.getFloat32(0)}function n(t){"use strict";var e,r,n;return e=new ArrayBuffer(8),r=new DataView(e),n=t.slice(0,32).join(""),r.setUint32(0,parseInt(n,2)),n="",n=t.slice(32,64).join(""),r.setUint32(4,parseInt(n,2)),r.getFloat64(0)}function o(t){"use strict";var e,r,n;return e=new ArrayBuffer(1),r=new DataView(e),n=t.join(""),r.setUint8(0,parseInt(n,2)),r.getUint8(0)}function s(t){"use strict";var e,r,n,i,s;for(e=t.length/8,r=[],s="",i=0,n=0;n<e;n+=1)r=t.slice(i,i+8),s=s.concat(String.fromCharCode(o(r))),r=[],i+=8;return s}function a(t){"use strict";var e,r,n;return e=new ArrayBuffer(4),r=new DataView(e),n=t.join(""),r.setUint32(0,parseInt(n,2)),r.getUint32(0)}function u(t){var e;return t>64&&t<91?e=t-65:t>96&&t<123?e=t-71:t>47&&t<58?e=t+4:43===t?e=62:47===t&&(e=63),e}function c(t){function e(t){var e,r=t.getDefinitions();return null!=r&&(e=r.getCoosyss()[0]),null!=t.getCoosyss()[0]&&(e=t.getCoosyss()[0]),e}var r={type:"FeatureCollection",features:[]},n=e(t);null!=n&&(r.crs={type:"name",properties:{name:n}});for(var o=[],i=t.getResources(),s=0;s<i.length;s++)p(i[s],o);return r.features=o,r}function p(t,e){for(var r=t.getResourcesOrTables(),n=0;n<r.length;n++){var o=r[n];o.hasOwnProperty("RESOURCE")?p(o.RESOURCE,e):o.hasOwnProperty("TABLE")&&h(o.TABLE,e)}}function h(t,e){var r,n=t.getFields(),o=t.getData(),i=t.getInfos();switch(o.getDataImplementationName()){case"TableData":var s=o.getData();r=s.getTrs();break;case"Binary":var a=o.getData(),s=a.getStream().getContent(!0,n);r=s.getTrs();break;case"Binary2":o.getData();throw Error("Binary2 not implemented");case"Fits":o.getData();throw Error("Fits not implemented");default:throw Error("Type of data not implemented")}l(n,i,r,e)}function l(t,e,r,n){for(var o=0;o<r.length;o++){var i=r[o].getTds();n.push(f(t,e,i))}}function f(t,e,r){function n(t){if(!(t.hasOwnProperty("RA")&&t.hasOwnProperty("DEC")&&t.hasOwnProperty("COOSYS")&&t.hasOwnProperty("ID")))throw Error("core metadata missing "+JSON.stringify(t))}function o(t,e){var r;switch(e){case"short":case"int":case"long":r=Number.parseInt(t);break;case"float":case"double":r=Number.parseFloat(t);break;default:r=t}return r}function i(t,e){var r=t.filter(function(t){return t===e});return 0!=r.length}for(var s={type:"Feature",geometry:null,properties:{}},a={},u=0;u<r.length;u++){var c=r[u],p=t[u],h=p.getValues(),l=null!=h?h.null():null,f=p.ucd(),y=p.datatype(),g=c.getContent(),b=p.name();if(i(at,f))a.RA=Number.parseFloat(g),a.COOSYS=p.ref();else if(i(ut,f))a.DEC=Number.parseFloat(g);else if(i(st,f))a.ID=g;else{var v=s.properties;g!=l&&(v[b]=o(g,y))}}a.hasOwnProperty("ID")||(a.ID=d.guid());for(var u=0;u<e.length;u++){var m=e[u];v[m.name()]=m.value()}n(a);var w={type:"Point",coordinates:[a.RA,a.DEC],crs:{type:"name",properties:{name:a.COOSYS}}};return s.geometry=w,s}function y(t){if(null==t)throw Error("xml cannot be null");if("string"==typeof t){var e=new DOMParser;t=e.parseFromString(t,"application/xml")}else if(null==t.documentElement)throw Error("This object is not supported");var r=t.documentElement.localName;if("VOTABLE"!=r)throw Error("This input is not a VOTable");return t}var d={};d.inherits=function(t,e){function r(){}r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},d.makeHttpObject=function(){try{return new XMLHttpRequest}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}throw Error("The object creation for making HTTP requests has failed.")},d.guid=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},d.findValueByKeyword=function(t,e){var r=void 0;for(i=0;i<t.length;i++){var n=t[i];if(n[0]===e){r=n[1];break}}return r},d.parseXML=function(t){if(document.implementation&&document.implementation.createDocument)xmlDoc=(new DOMParser).parseFromString(t,"text/xml");else{if(!window.ActiveXObject)return alert("Your browser cannot handle this script"),null;xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.loadXML(t)}return xmlDoc};var g=function(){this.nodeID={},this.nodeName={},this.warnings=[]};g.prototype.getEltsByID=function(){return this.nodeID},g.prototype.getEltsByName=function(){return this.nodeName},g.prototype.getWarnings=function(){return this.warnings},g.prototype.addEntryID=function(t,e){this.nodeID[t]=e},g.prototype.addEntryName=function(t,e){this.nodeName.hasOwnProperty(t)?this.nodeName[t].push(e):(this.nodeName[t]=[],this.nodeName[t].push(e))},g.prototype.addWarning=function(t){this.warnings.push(t)};var b=function(t){if(this.attributes={},null!=t&&1==t.nodeType){for(var e=0,r=t.attributes.length;e<r;e++){var n=t.attributes[e];this.attributes[n.name]=n.value}if(this.attributes.hasOwnProperty("ID")){var o=v.getInstance();o.addEntryID(this.attributes.ID,this)}if(this.attributes.hasOwnProperty("name")){var o=v.getInstance();o.addEntryName(this.attributes.name,this)}}};b.prototype.getAttributes=function(){return this.attributes},b.prototype.hasAttribute=function(t){return this.attributes.hasOwnProperty(t)},b.prototype.hasAttributes=function(){return 0!=Object.keys(this.attributes).length},b.prototype.getCache=function(){return v.getInstance()};var v=function(){function t(){var t=new g;return t}var e;return{getInstance:function(){return e||(e=t()),e}}}(),m=function(t){b.prototype.constructor.call(this,t),this.value;var e=t.childNodes[0];null!=e&&3==e.nodeType&&(this.value=null==e.textContent?null:e.textContent.trim())};d.inherits(b,m),m.prototype.getContent=function(){return this.value};var w=function(t){b.prototype.constructor.call(this,t)};d.inherits(b,w),w.prototype.ref=function(){return this.attributes.ref},w.prototype.ucd=function(){return this.attributes.ucd},w.prototype.utype=function(){return this.attributes.utype};var N=function(t){b.prototype.constructor.call(this,t)};d.inherits(b,N),N.prototype.ref=function(){return this.attributes.ref},N.prototype.ucd=function(){return this.attributes.ucd},N.prototype.utype=function(){return this.attributes.utype};var D=function(t){b.prototype.constructor.call(this,t)};d.inherits(b,D),D.prototype.value=function(){return this.attributes.value},D.prototype.inclusive=function(){return this.attributes.inclusive};var I=function(t){b.prototype.constructor.call(this,t)};d.inherits(b,I),I.prototype.value=function(){return this.attributes.value},I.prototype.inclusive=function(){return this.attributes.inclusive};var k=function(t){b.prototype.constructor.call(this,t),this.options=O(t)},O=function(t){for(var e=[],r=0;null!=t&&r<t.childNodes.length;r++){var n=t.childNodes[r];if(1==n.nodeType){var o=n.localName;"OPTION"==o?e.push(new k(n)):this.getCache().addWarning("unknown element "+o+" in Option node")}}return e};d.inherits(b,k),k.prototype.name=function(){return this.attributes.name},k.prototype.value=function(){return this.attributes.value},k.prototype.getOptions=function(){return this.options};var T=function(t){b.prototype.constructor.call(this,t);var e=C(t);this.min=e[0],this.max=e[1],this.options=e[2]},C=function(t){for(var e,r,n=[],o=0;null!=t&&o<t.childNodes.length;o++){var i=t.childNodes[o];if(1==i.nodeType){var s=i.localName;switch(s){case"MIN":e=new D(i);break;case"MAX":r=new I(i);break;case"OPTION":n.push(new k(i));break;default:this.getCache().addWarning("unknown element "+s+" in Values node")}}}return[e,r,n]};d.inherits(b,T),T.prototype.ID=function(){return this.attributes.ID},T.prototype.type=function(){return this.attributes.type},T.prototype.null=function(){return this.attributes.null},T.prototype.ref=function(){return this.attributes.ref},T.prototype.getMin=function(){return this.min},T.prototype.getMax=function(){return this.max},T.prototype.getOptions=function(){return this.options};var E=function(t){b.prototype.constructor.call(this,t)};d.inherits(b,E),E.prototype.ID=function(){return this.attributes.ID},E.prototype.content_role=function(){return this.attributes["content-role"]},E.prototype.content_type=function(){return this.attributes["content-type"]},E.prototype.title=function(){return this.attributes.title},E.prototype.value=function(){return this.attributes.value},E.prototype.href=function(){return this.attributes.href},E.prototype.gref=function(){return this.attributes.gref},E.prototype.action=function(){return this.attributes.action};var S=function(t){b.prototype.constructor.call(this,t);var e=A(t);this.description=e[0],this.values=e[1],this.links=e[2]},A=function(t){for(var e,r,n=[],o=0;null!=t&&o<t.childNodes.length;o++){var i=t.childNodes[o];if(1==i.nodeType){var s=i.localName;switch(s){case"DESCRIPTION":e=new m(i);break;case"VALUES":r=new T(i);break;case"LINK":n.push(new E(i));break;default:this.getCache().addWarning("unknown element "+s+" in Field node")}}}return[e,r,n]};d.inherits(b,S),S.prototype.ID=function(){return this.attributes.ID},S.prototype.unit=function(){return this.attributes.unit},S.prototype.datatype=function(){return this.attributes.datatype},S.prototype.precision=function(){return this.attributes.precision},S.prototype.width=function(){return this.attributes.width},S.prototype.xtype=function(){return this.attributes.xtype},S.prototype.ref=function(){return this.attributes.ref},S.prototype.name=function(){return this.attributes.name},S.prototype.ucd=function(){return this.attributes.ucd},S.prototype.utype=function(){return this.attributes.utype},S.prototype.arraysize=function(){return this.attributes.arraysize},S.prototype.type=function(){return this.attributes.type},S.prototype.getDescription=function(){return this.description},S.prototype.getValues=function(){return this.values},S.prototype.getLinks=function(){return this.links};var P=function(t){S.prototype.constructor.call(this,t)};d.inherits(S,P),P.prototype.value=function(){return this.attributes.value};var R=function(t){b.prototype.constructor.call(this,t);var e=B(t);this.description=e[0],this.fieldrefs=e[1],this.paramrefs=e[2],this.params=e[3],this.groups=e[4]},B=function(t){for(var e,r=[],n=[],o=[],i=[],s=0;null!=t&&s<t.childNodes.length;s++){var a=t.childNodes[s];if(1==a.nodeType){var u=a.localName;switch(u){case"DESCRIPTION":e=new m(a);break;case"FIELDref":r.push(new w(a));break;case"PARAMref":n.push(new N(a));break;case"PARAM":o.push(new P(a));break;case"GROUP":i.push(new R(a));break;default:this.getCache().addWarning("unknown element "+u+" in Group node")}}}return[e,r,n,o,i]};d.inherits(b,R),R.prototype.ID=function(){return this.attributes.ID},R.prototype.name=function(){return this.attributes.name},R.prototype.ref=function(){return this.attributes.ref},R.prototype.ucd=function(){return this.attributes.ucd},R.prototype.utype=function(){return this.attributes.utype},R.prototype.getDescription=function(){return this.description},R.prototype.getFieldrefs=function(){return this.fieldrefs},R.prototype.getParamrefs=function(){return this.paramrefs},R.prototype.getParams=function(){return this.params},R.prototype.getGroups=function(){return this.groups};var x=function(t){b.prototype.constructor.call(this,t),this.value=L(t)};d.inherits(b,x);var L=function(t){for(var e,r=0;null!=t&&r<t.childNodes.length;r++){var n=t.childNodes[r];null!=n&&3==n.nodeType?e=null==n.textContent?null:n.textContent.trim():this.getCache().addWarning("unknown element "+n+" in Coosys node")}return e};x.prototype.ID=function(){return this.attributes.ID},x.prototype.equinox=function(){return this.attributes.equinox},x.prototype.epoch=function(){return this.attributes.epoch},x.prototype.system=function(){return this.attributes.system},x.prototype.getContent=function(){return this.value};var M=function(t){b.prototype.constructor.call(this,t);var e=F(t);this.coosys=e[0],this.param=e[1]},F=function(t){for(var e=[],r=[],n=0;null!=t&&n<t.childNodes.length;n++){var o=t.childNodes[n];if(1==o.nodeType){var i=o.localName;switch(i){case"COOSYS":e.push(new x(o));break;case"PARAM":r.push(new P(o));break;default:this.getCache().addWarning("unknown element "+i+" in Definitions node")}"COOSYS"==i?e.push(new x(o)):"PARAM"==i?r.push(new P(o)):this.getCache().addWarning("unknown element "+i+" in Definitions node")}}return[e,r]};d.inherits(b,M),M.prototype.getCoosyss=function(){return this.coosys},M.prototype.getParams=function(){return this.param};var U=function(t){b.prototype.constructor.call(this,t);var e=t.childNodes[0];null!=e&&3==e.nodeType&&(this.value=null==e.textContent?null:e.textContent.trim())};U.prototype.name=function(){return this.attributes.name},U.prototype.value=function(){return this.attributes.value},U.prototype.ID=function(){return this.attributes.ID},U.prototype.unit=function(){return this.attributes.unit},U.prototype.xtype=function(){return this.attributes.xtype},U.prototype.ref=function(){return this.attributes.ref},U.prototype.ucd=function(){return this.attributes.ucd},U.prototype.utype=function(){return this.attributes.utype},U.prototype.getContent=function(){return this.value};var V=function(t,e){b.prototype.constructor.call(this,t),null==e?this.value=null==t.textContent?"":t.textContent.trim():this.value=null==e?"":e.trim()};d.inherits(b,V),V.prototype.encoding=function(){return this.attributes.encoding},V.prototype.getContent=function(){return this.value};var j=function(t,e){if(b.prototype.constructor.call(this,t),null==e)this.tds=W(t);else{this.tds=[];for(var r=0;r<e.length;r++)this.tds.push(new V(null,e[r]))}},W=function(t){for(var e=[],r=0;null!=t&&r<t.childNodes.length;r++){var n=t.childNodes[r];if(1==n.nodeType){var o=n.localName;"TD"==o?e.push(new V(n)):this.getCache().addWarning("unknown element "+o+" in Tr node")}}return e};d.inherits(b,j),j.prototype.ID=function(){return this.attributes.ID},j.prototype.getTds=function(){return this.tds};var G=function(t,e){b.prototype.constructor.call(this,t),this.name=e};d.inherits(b,G),G.prototype.getName=function(){return this.name};var X=function(t,e){if(G.prototype.constructor.call(this,t,"TableData"),null==e)this.trs=Y(t);else{this.trs=[];for(var r=0;r<e.length;r++)this.trs.push(new j(null,e[r]))}},Y=function(t){for(var e=[],r=0;null!=t&&r<t.childNodes.length;r++){var n=t.childNodes[r];if(1==n.nodeType){var o=n.localName;"TR"==o?e.push(new j(n)):this.getCache().addWarning("unknown element "+o+" in TableData node")}}return e};d.inherits(G,X),X.prototype.getTrs=function(){return this.trs};var q={short:16,int:32,float:32,double:64,unsignedByte:8},_=function(t){this.ptrStream=0,this.bufferTabBits=[],this.fields=t};_.prototype.computeDataSize=function(t,e,r){var n=0;if("char"===t)if(/\*/.test(this.fields[e].arraysize())){var o=this.streamB64(32,r);n=8*a(o),o=[]}else n=8*this.fields[e].arraysize();else n=q[t];return n},_.prototype.streamB64=function(t,e){for(var r=[],n=this.bufferTabBits.length,o=Math.ceil((t-n)/6),i=0;i<n;i+=1)r.push(this.bufferTabBits[i]);this.bufferTabBits=[];for(var i=0;i<o;i+=1){if(10==e.charCodeAt(this.ptrStream))i-=1;else for(var s=u(e.charCodeAt(this.ptrStream)),a=32;a>0;a>>=1)r.length!==t?r.push((s&a)===a?"1":"0"):this.bufferTabBits.push((s&a)===a?"1":"0");this.ptrStream+=1}return r},_.prototype.decodeValue=function(i,a,u,c){var p,h=[];switch("NULL"!=i&&(h=this.streamB64(a,c)),i){case"short":p=t(h);break;case"int":p=e(h);break;case"float":p=r(h),p=p.toFixed(this.fields[u].precision());break;case"double":p=n(h),p=p.toFixed(this.fields[u].precision());break;case"unsignedByte":p=o(h);break;case"char":p=s(h);break;case"NULL":p="NULL"}return"NaN"!==p&&"NULL"!==p&&0!==p||(p=""),p},_.prototype.decode=function(t){var e=[],r=0,n=t.length,o=this.fields.length,i=[];do{var s=this.fields[r].datatype(),a=this.computeDataSize(s,r,t);0==a&&(s="NULL");var u=this.decodeValue(s,a,r,t);i.push(u),r===o-1?(r=0,e.push(i),i=[]):r+=1}while(this.ptrStream<n);return e};var z=function(t){b.prototype.constructor.call(this,t),this.value=t.textContent};d.inherits(b,z),z.prototype.type=function(){return this.attributes.type},z.prototype.href=function(){return this.attributes.href},z.prototype.actuate=function(){return this.attributes.actuate},z.prototype.encoding=function(){return this.attributes.encoding},z.prototype.expires=function(){return this.attributes.expires},z.prototype.rights=function(){return this.attributes.rights},z.prototype.getContent=function(t,e){var r;if(null==t||0==t)r=this.value;else{var n=new _(e);r=new X(null,n.decode(this.value))}return r};var J=function(t){G.prototype.constructor.call(this,t,"Binary"),this.stream=H(t)},H=function(t){for(var e,r=0;null!=t&&r<t.childNodes.length;r++){var n=t.childNodes[r];if(1==n.nodeType){var o=n.localName;if("STREAM"!=o)throw"Unknown element";e=new z(n)}}return e};d.inherits(G,J),J.prototype.getStream=function(){return this.stream};var K=function(t){G.prototype.constructor.call(this,t,"Binary2"),this.stream=Q(t)},Q=function(t){for(var e,r=0;null!=t&&r<t.childNodes.length;r++){var n=t.childNodes[r];if(1==n.nodeType){var o=n.localName;"STREAM"==o?e=new M(n):this.getCache().addWarning("unknown element "+o+" in Binary2 node")}}return e};d.inherits(G,K),K.prototype.getStream=function(){return this.stream};var Z=function(t){G.prototype.constructor.call(this,t,"Fits"),this.stream=$(t)},$=function(t){for(var e,r=0;null!=t&&r<t.childNodes.length;r++){var n=t.childNodes[r];if(1==n.nodeType){var o=n.localName;"STREAM"==o?e=new M(n):this.getCache().addWarning("unknown element "+o+" in Fits node")}}return e};d.inherits(G,Z),Z.prototype.getStream=function(){return this.stream},Z.prototype.extnum=function(){return this.attributes.extnum};var tt=function(t){b.prototype.constructor.call(this,t);var e=et(t);this.data=e[0],this.infos=e[1]},et=function(t){for(var e,r=[],n=0;null!=t&&n<t.childNodes.length;n++){var o=t.childNodes[n];if(1==o.nodeType){var i=o.localName;switch(i){case"TABLEDATA":e=new X(o);break;case"BINARY":e=new J(o);break;case"BINARY2":e=new K(o);break;case"FITS":e=new Z(o);break;case"INFO":r.push(new U(o));break;default:this.getCache().addWarning("unknown element "+i+" in Data node")}}}return[e,r]};d.inherits(b,tt),tt.prototype.getData=function(){return this.data},tt.prototype.getDataImplementationName=function(){return this.data.getName()},tt.prototype.getInfos=function(){return this.infos};var rt=function(t){b.prototype.constructor.call(this,t);var e=nt(t);this.fields=e[0],this.params=e[1],this.groups=e[2],this.links=e[3],this.data=e[4],this.description=e[5],this.infos=e[6]},nt=function(t){for(var e,r,n=[],o=[],i=[],s=[],a=[],u=0;null!=t&&u<t.childNodes.length;u++){var c=t.childNodes[u];if(1==c.nodeType){var p=c.localName;switch(p){case"DESCRIPTION":r=new m(c);break;case"FIELD":n.push(new S(c));break;case"PARAM":o.push(new P(c));break;case"GROUP":i.push(new R(c));break;case"LINK":s.push(new E(c));break;case"DATA":e=new tt(c);break;case"INFO":a.push(new U(c));break;default:this.getCache().addWarning("unknown element "+p+" in Table node")}}}return[n,o,i,s,e,r,a]};d.inherits(b,rt),rt.prototype.ID=function(){return this.attributes.ID},rt.prototype.name=function(){return this.attributes.name},rt.prototype.ref=function(){return this.attributes.ref},rt.prototype.ucd=function(){return this.attributes.ucd},rt.prototype.utype=function(){return this.attributes.utype},rt.prototype.nrows=function(){return this.attributes.nrows},rt.prototype.getFields=function(){return this.fields},rt.prototype.getParams=function(){return this.params},rt.prototype.getGroups=function(){return this.groups},rt.prototype.getLinks=function(){return this.links},rt.prototype.getData=function(){return this.data},rt.prototype.getInfos=function(){return this.infos},rt.prototype.getDescription=function(){return this.description};var ot=function(t){b.prototype.constructor.call(this,t);var e=it(t);this.description=e[0],this.infos=e[1],this.coosyss=e[2],this.params=e[3],this.groups=e[4],this.abstractSequences=e[5]},it=function(t){for(var e,r=[],n=[],o=[],i=[],s=[],a=0,u=0;null!=t&&u<t.childNodes.length;u++){var c=t.childNodes[u];if(1==c.nodeType){var p=c.localName;switch(p){case"DESCRIPTION":e=new m(c);break;case"INFO":r.push(new U(c));break;case"COOSYS":n.push(new x);break;case"GROUP":o.push(new R);break;case"PARAM":i.push(new P);break;default:a=u}}if(0!=a)break}for(var h={},l=[],f=[],u=a;null!=t&&u<t.childNodes.length;u++){var c=t.childNodes[u];if(1==c.nodeType){var p=c.localName;switch(p){case"LINK":h.hasOwnProperty("TABLE")||h.hasOwnProperty("RESOURCE")?(h.LINKS=l,h.INFOS=f,s.push(h),h={},l=[],f=[]):l.push(new E(c));break;case"TABLE":h.TABLE=new rt(c);break;case"RESOURCE":h.RESOURCE=new ot(c);break;case"INFO":f.push(new U(c));break;default:this.getCache().addWarning("Unkknown element "+p+" in RESOURCE node")}}}return 0!=Object.keys(h).length&&s.push(h),[e,r,n,i,o,s]};d.inherits(b,ot),ot.prototype.ID=function(){return this.attributes.ID},ot.prototype.name=function(){return this.attributes.name},ot.prototype.utype=function(){return this.attributes.utype},ot.prototype.type=function(){return this.attributes.type},ot.prototype.getDescription=function(){return this.description},ot.prototype.getInfos=function(){return this.infos},ot.prototype.getCoosyss=function(){return this.coosyss},ot.prototype.getGroups=function(){return this.groups},ot.prototype.getParams=function(){return this.params},ot.prototype.getResourcesOrTables=function(){return this.abstractSequences};var st=["meta.record","meta.id;meta.main","VOX:Image_Titleq"],at=["pos.eq.ra;meta.main","POS_EQ_RA_MAIN"],ut=["pos.eq.dec;meta.main","POS_EQ_DEC_MAIN"],ct=function(t){this.votable=t,this.featureCollection=c(this.votable)};ct.prototype.getGeoJSon=function(t){var e=t|!1;return JSON.stringify(this.featureCollection,null,e)};var pt=function(t){t=y(t);var e=t.documentElement;b.prototype.constructor.call(this,e);var r=ht(e);this.definitions=r[0],this.infos=r[1],this.resources=r[2],this.description=r[3],this.coosyss=r[4],this.groups=r[5],this.params=r[6]},ht=function(t){for(var e,r,n=t,o=[],i=[],s=[],a=[],u=[],c=0;c<n.childNodes.length;c++){var p=n.childNodes[c];if(1==p.nodeType){var h=p.localName;switch(h){case"DEFINITIONS":e=new M(p);break;case"INFO":o.push(new U(p));break;case"RESOURCE":i.push(new ot(p));break;case"DESCRIPTION":r=new m(p);break;case"COOSYS":s.push(new x(p));break;case"GROUP":a.push(new R(p));break;case"PARAM":u.push(new P(p));break;default:this.getCache().addWarning("unknown element "+h+" in Votable node")}}}return[e,o,i,r,s,a,u]};d.inherits(b,pt),pt.prototype.ID=function(){return this.attributes.ID},pt.prototype.version=function(){return this.attributes.version},pt.prototype.getInfos=function(){return this.infos},pt.prototype.getDefinitions=function(){return this.definitions},pt.prototype.getResources=function(){return this.resources},pt.prototype.getCoosyss=function(){return this.coosyss},pt.prototype.getGroups=function(){return this.groups},pt.prototype.getParams=function(){return this.params},pt.prototype.getDescription=function(){return this.description},pt.prototype.getVotableEltByID=function(t){return this.getCache().getEltsByID()[t]},pt.prototype.getVotableEltsByName=function(t){return this.getCache().getEltsByName()[t]},pt.prototype.convertToGeoJSon=function(t){var e=new ct(this);return e.getGeoJSon(t)};var lt={};return lt.Votable=pt,lt.Binary=J,lt.Binary2=K,lt.Coosys=x,lt.Data=tt,lt.Definitions=M,lt.Description=m,lt.Field=S,lt.Fieldref=w,lt.Fits=Z,lt.Group=R,lt.Info=U,lt.Link=E,lt.Max=I,lt.Min=D,lt.Option=k,lt.Param=P,lt.Paramref=N,lt.Resource=ot,lt.Stream=z,lt.Table=rt,lt.TableData=X,lt.Td=V,lt.Tr=j,lt.Values=T,lt.version={major:1,minor:1,patch:0,date:"2016-10-12",toString:function(){return this.major+"."+this.minor+"."+this.patch}},window.JsVotable=lt,lt}();